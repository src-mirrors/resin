<web-app xmlns="http://caucho.com/ns/resin"
         xmlns:resin="http://caucho.com/ns/resin/core">
  <class-loader>
    <simple-loader path="WEB-INF/xsl"/>
    <compiling-loader path="WEB-INF/classes" source="WEB-INF/src"/>
  </class-loader>

  <database jndi-name="jdbc/resin">
    <driver type="com.caucho.db.jdbc.ConnectionPoolDataSourceImpl">
      <path>WEB-INF/db</path>
      <remove-on-error/>
    </driver>
  </database>

  <resin:set var="doc_context_path" value="${webApp.contextPath}"/>

    <servlet servlet-name="viewfile" 
             servlet-class="com.caucho.doc.ViewFileServlet">
    </servlet>
    <servlet-mapping url-pattern="/viewfile/*" servlet-name="viewfile"/>
  
    <system-property javax.xml.stream.XMLOutputFactory="com.caucho.xml.stream.XMLOutputFactoryImpl"/>

    <servlet servlet-name="xtp-doc" 
             servlet-class="com.caucho.xtpdoc.ResinDocServlet"/>
    <servlet-mapping url-pattern="*.xtp" servlet-name="xtp-doc"/>
		   
    <welcome-file-list>
      <welcome-file>index.xtp</welcome-file>
      <welcome-file>index.jsp</welcome-file>
      <welcome-file>index.php</welcome-file>
      <welcome-file>index.html</welcome-file>
    </welcome-file-list>
    
    <web-app-default>
      <servlet servlet-name="viewfile" 
               servlet-class="com.caucho.doc.ViewFileServlet"/>
      <servlet-mapping url-pattern="/viewfile/*" servlet-name="viewfile"/>
      <inherit-session>true</inherit-session>

      <servlet servlet-name="xtp-doc" 
               servlet-class="com.caucho.xtpdoc.ResinDocServlet">
        <init doc-context-path="${doc_context_path}"/>
      </servlet>
      <servlet-mapping url-pattern="*.xtp" servlet-name="xtp-doc"/>
		   
      <welcome-file-list>
        <welcome-file>index.xtp</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>index.php</welcome-file>
        <welcome-file>index.html</welcome-file>
      </welcome-file-list>
    </web-app-default>

  <web-app-deploy url-prefix="/jsp/tutorial"
                  path="jsp/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <rewrite-dispatch>
    <redirect regexp='/php' target='${app.contextPath}/quercus'/>
  </rewrite-dispatch>
    
  <web-app-deploy url-prefix="/quercus/tutorial"
                  path="quercus/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <web-app-deploy url-prefix="/servlet/tutorial"
                  path="servlet/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <web-app-deploy url-prefix="/webapp/tutorial"
                  path="webapp/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>


  <web-app-deploy url-prefix="/portlet/tutorial"
                  path="portlet/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <web-app-deploy url-prefix="/ejb/tutorial"
                  path="ejb/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>
<!--
  <web-app-deploy url-prefix="/esb/tutorial"
                  path="esb/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>
  -->

  <web-app-deploy url-prefix="/soa/tutorial"
                  path="soa/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>
<!--
  <web-app-deploy url-prefix="/jms/tutorial"
                  path="jms/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>
  -->

  <web-app-deploy url-prefix="/security/tutorial"
                  path="security/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <web-app-deploy url-prefix="/resource/tutorial"
                  path="resource/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <web-app-deploy url-prefix="/db/tutorial"
                  path="db/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <web-app-deploy url-prefix="/jmx/tutorial"
                  path="jmx/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <web-app-deploy url-prefix="/amber/tutorial"
                  path="amber/tutorial"
                  startup-mode="lazy">
  </web-app-deploy>

  <servlet servlet-name="javadoc" 
           servlet-class="com.caucho.doc.JavadocRedirectServlet"/>

  <servlet-mapping url-pattern="/javadoc/*" servlet-name="javadoc"/>
</web-app>

